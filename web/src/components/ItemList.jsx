import React,{useState} from 'react'
export default function ItemList({items,onRemove,onAdjustQty,onSaveInline,categories,suppliers}){if(!items.length)return <p className='text-sm text-gray-500'>No items.</p>;const currency=n=>`£${Number(n||0).toFixed(2)}`;return(<div className='bg-white rounded-2xl shadow'><div className='grid grid-cols-12 gap-2 p-3 border-b text-xs font-semibold text-gray-600'><div className='col-span-2'>Item</div><div className='col-span-2'>Category</div><div className='col-span-2'>Supplier</div><div className='col-span-2'>Quantity</div><div className='col-span-2'>Unit Price</div><div className='col-span-2'>Total</div></div>{items.map(i=><Row key={i.id} i={i} onRemove={onRemove} onAdjustQty={onAdjustQty} onSaveInline={onSaveInline} categories={categories} suppliers={suppliers} currency={currency}/>)}</div>)}
function Row({i,onRemove,onAdjustQty,onSaveInline,categories,suppliers,currency}){const[edit,setEdit]=useState(false);const[draft,setDraft]=useState({item:i.item,category:i.category,supplier:i.supplier,price:i.price,sku:i.sku});const save=async()=>{await onSaveInline(i.id,draft);setEdit(false)};return(<div className='grid grid-cols-12 gap-2 items-center p-3 border-b last:border-0'><div className='col-span-2'>{edit?<input className='border rounded p-1 w-full' value={draft.item} onChange={e=>setDraft({...draft,item:e.target.value})}/> : <span className='font-medium'>{i.item}</span>}<div className='text-xs text-gray-500'>{i.sku||'—'}</div></div><div className='col-span-2'>{edit?<select className='border rounded p-1 w-full' value={draft.category} onChange={e=>setDraft({...draft,category:e.target.value})}>{categories.map(c=><option key={c} value={c}>{c}</option>)}</select>:<span className='badge'>{i.category}</span>}</div><div className='col-span-2'>{edit?<select className='border rounded p-1 w-full' value={draft.supplier} onChange={e=>setDraft({...draft,supplier:e.target.value})}>{suppliers.map(s=><option key={s} value={s}>{s}</option>)}</select>:<span>{i.supplier}</span>}</div><div className='col-span-2 flex items-center gap-2'><button className='px-2 py-1 rounded-lg border' onClick={()=>onAdjustQty(i,-1)}>-</button><span>{i.quantity}</span><button className='px-2 py-1 rounded-lg border' onClick={()=>onAdjustQty(i,1)}>+</button></div><div className='col-span-2'>{edit?<input type='number' step='0.01' className='border rounded p-1 w-full' value={draft.price} onChange={e=>setDraft({...draft,price:e.target.value})}/> : currency(i.price)}</div><div className='col-span-2 flex items-center justify-between'><span className='font-semibold'>{currency(i.price*i.quantity)}</span>{!edit?<div className='flex gap-2'><button className='px-3 py-1 rounded-lg border' onClick={()=>setEdit(true)}>Edit</button><button className='px-3 py-1 rounded-lg border hover:bg-gray-50' onClick={()=>onRemove(i.id)}>Remove</button></div>:<div className='flex gap-2'><button className='px-3 py-1 rounded-lg border' onClick={save}>Save</button><button className='px-3 py-1 rounded-lg border' onClick={()=>{setEdit(false);setDraft({item:i.item,category:i.category,supplier:i.supplier,price:i.price,sku:i.sku})}}>Cancel</button></div>}</div></div>) }